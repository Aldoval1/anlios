{% extends "dashboard.html" %}

{% block dashboard_content %}
<div class="container-fluid h-100">
    <div class="row h-100">
        <!-- Panel Izquierdo: Simulación del Servidor -->
        <div class="col-lg-5 h-100 d-flex flex-column">
            <div class="card flex-grow-1">
                <div class="card-header">
                    <h4>{{ _('Server Simulation') }}</h4>
                </div>
                <div class="card-body" id="server-simulation-container" style="overflow-y: auto;">
                    <!-- La simulación del servidor se renderizará aquí con JavaScript -->
                    <p class="text-muted">{{ _('Loading server structure...') }}</p>
                </div>
            </div>
        </div>

        <!-- Panel Derecho: Chat con IA y Controles -->
        <div class="col-lg-7 h-100 d-flex flex-column">
            <div class="card flex-grow-1">
                <div class="card-header">
                    <h4>{{ _('AI Assistant') }}</h4>
                </div>
                <div class="card-body d-flex flex-column" id="ai-chat-container">
                    <!-- Área de Mensajes del Chat -->
                    <div id="chat-messages" class="flex-grow-1 mb-3" style="overflow-y: auto; border: 1px solid var(--border-input); padding: 10px; border-radius: var(--border-radius);">
                        <div class="ai-message">
                            <p>{{ _('Hello! I am your server design assistant. Tell me what changes you would like to make. For example: "Create a category for staff with a private text channel and a voice channel."') }}</p>
                        </div>
                    </div>
                    <!-- Input del Usuario -->
                    <div class="input-group">
                        <input type="text" id="user-prompt-input" class="form-control" placeholder="{{ _('Type your request here...') }}">
                        <button class="btn btn-primary" id="send-prompt-btn">{{ _('Send') }}</button>
                    </div>
                </div>
                <div class="card-footer text-center">
                    <button class="btn btn-success w-100 mb-2" id="save-changes-btn">{{ _('Save and Apply Changes') }}</button>
                    <div class="btn-group w-100" role="group">
                        <button type="button" class="btn btn-secondary" id="undo-btn" title="{{ _('Undo') }}">←</button>
                        <button type="button" class="btn btn-danger" id="cancel-btn" title="{{ _('Cancel All') }}">X</button>
                        <button type="button" class="btn btn-secondary" id="redo-btn" title="{{ _('Redo') }}">→</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- AÑADIDO: Bloque para el script específico de esta página -->
{% block scripts %}
{{ super() }} <!-- Importante para no sobreescribir los scripts del layout base -->
<script>
// Aquí irá toda la lógica del frontend para el módulo Diseñador en la Fase 2.
// Por ahora, este es un placeholder.
console.log("Módulo Diseñador cargado.");
</script>
{% endblock %}