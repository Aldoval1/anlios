{% extends "dashboard.html" %}
{% block title %}{{ _('Premium Membership') }}{% endblock %}

{% block dashboard_content %}
    <h1>{{ _('Premium Membership') }}</h1>
    <p class="text-muted">{{ _('Manage your subscription status and unlock exclusive features.') }}</p>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ 'success' if category == 'success' else 'danger' }} mt-3" style="font-family: 'Roboto', sans-serif; font-size: 0.9rem;">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}

    <div class="row mt-4">
        <div class="col-md-6 mb-4 mb-md-0">
            <div class="card h-100">
                <div class="card-header">
                    <h5>{{ _('Current Status') }}</h5>
                </div>
                <div class="card-body">
                    {% if is_active %}
                        <p class="fs-5" style="color: #28a745;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-check-circle" style="vertical-align: middle; margin-right: 8px;"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                            {{ _('This server is Premium!') }}
                        </p>
                        <p>{{ _('Your access expires on:') }} <br><span class="fw-bold">{{ sub_info.expires_at|timestamp_to_date }}</span></p>
                        {% if time_left %}
                        <p class="text-muted small">({{ time_left.days }} days, {{ (time_left.seconds // 3600) }} hours left)</p>
                        {% endif %}
                    {% else %}
                        <p class="fs-5" style="color: #ffc107;">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-alert-triangle" style="vertical-align: middle; margin-right: 8px;"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                            {{ _('This server does not have an active subscription.') }}
                        </p>
                        <p class="text-muted">{{ _('Redeem a code to unlock the full potential of Anlios Bot!') }}</p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card h-100">
                <div class="card-header">
                    <h5>{{ _('Redeem Code') }}</h5>
                </div>
                <div class="card-body d-flex flex-column">
                    <form method="POST" class="flex-grow-1 d-flex flex-column">
                        <div class="mb-3">
                            <label for="premium_code" class="form-label">{{ _('Enter your premium code:') }}</label>
                            <input type="text" class="form-control" id="premium_code" name="premium_code" required>
                        </div>
                        <button type="submit" class="btn btn-primary w-100 mt-auto">{{ _('Redeem') }}</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}